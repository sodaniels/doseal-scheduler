## use below to run test
## pytest --log-cli-level=INFO --html=report.html --self-contained-html


#starting the worker dashboard
rq-dashboard
http://localhost:9181 #viewing the worker dashboard

# running the job locally

#API server
#Open new terminal:
venv/bin/gunicorn wsgi:application -b 0.0.0.0:9090 --reload

#RQ Worker (publishing jobs)
OBJC_DISABLE_INITIALIZE_FORK_SAFETY=YES venv/bin/rq worker publish

#RQ Scheduler
#Third terminal:
venv/bin/rqscheduler


curl -i "https://bccd7d27f0ad.ngrok-free.app/social/api/v1/social/oauth/facebook/start" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjk3ZmQxN2I3Y2NiOGZkNzdlN2U4MzljIiwiZXhwIjoxNzcwMjAwNDYyLCJhY2NvdW50X3R5cGUiOiJzeXN0ZW1fb3duZXIiLCJ0eXBlIjpudWxsLCJwZXJtaXNzaW9ucyI6e319.t9B_mBzKXjCyr8Ftma8l4WHw-ud7YW3ZShyIxM7lI4o"

https://bccd7d27f0ad.ngrok-free.app/social/api/v1/social/oauth/facebook/start
https://bccd7d27f0ad.ngrok-free.app/social/api/v1/social/oauth/facebook/callback

https://bccd7d27f0ad.ngrok-free.app/social/api/v1/social/oauth/instagram/start
https://bccd7d27f0ad.ngrok-free.app/social/api/v1/social/oauth/instagram/callback

https://bccd7d27f0ad.ngrok-free.app/social/api/v1/social/oauth/threads/start
https://bccd7d27f0ad.ngrok-free.app/social/api/v1/social/oauth/threads/callback

https://bccd7d27f0ad.ngrok-free.app/social/api/v1/social/oauth/whatsapp/start
https://bccd7d27f0ad.ngrok-free.app/social/api/v1/social/oauth/whatsapp/callback

https://bccd7d27f0ad.ngrok-free.app/social/api/v1/social/oauth/pinterest/start
https://bccd7d27f0ad.ngrok-free.app/social/api/v1/social/oauth/pinterest/callback


curl -i "https://bccd7d27f0ad.ngrok-free.app/social/api/v1/social/oauth/pinterest/start" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjk4MWVkZjM5OTExZTdkYjY4MjQ5YjU0IiwiZXhwIjoxNzcwMzQxMDM0LCJhY2NvdW50X3R5cGUiOiJzdXBlcl9hZG1pbiIsInR5cGUiOm51bGwsInBlcm1pc3Npb25zIjp7fX0.irFfyvS1yTMP_MqKeDAcnPhWBlRG1JF_RimFn2QggFQ"



  ##ADDING A NEW INTEGRATION
  1. CREATE the oauth_[name]_resource.py file that have the three essential endpoints. /start, /callback, /connect-account
  2. CREATE the [name]_adapter.py file 
  3. Update the server/social/job.py with helper functions and final udpate to _publish_scheduled_post


EMAIL CONFIGURATION

How to switch providers (env examples)

Mailgun

export EMAIL_PROVIDER=mailgun
export SENDER_EMAIL="info@mg.yourdomain.com"
export MAIL_NAME="Instntmny Transfer"

export MAILGUN_API_KEY="key-xxxxxxxx"
export INSTNTMNY_MAILGUN_DOMAIN="mg.yourdomain.com"
export MAILGUN_API_HOST="api.mailgun.net"   # or api.eu.mailgun.net
export EMAIL_TEMPLATES_DIR="templates"

SMTP (works for Gmail too)

export EMAIL_PROVIDER=smtp
export SENDER_EMAIL="yourgmail@gmail.com"
export MAIL_NAME="Instntmny Transfer"

export SMTP_HOST="smtp.gmail.com"
export SMTP_PORT="587"
export SMTP_USERNAME="yourgmail@gmail.com"
export SMTP_PASSWORD="your_app_password_here"
export SMTP_USE_TLS="true"
export EMAIL_TEMPLATES_DIR="templates"