<!-- templates/email/forgot_password.html -->

<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Reset your password</title>

  <style>
    body { margin:0; padding:0; background:#f6f6f6; }
    table { border-collapse:collapse; }
    .wrapper { width:100%; background:#f6f6f6; padding:24px 12px; }
    .container { max-width:600px; margin:0 auto; background:#ffffff; border:1px solid #e9e9e9; border-radius:10px; overflow:hidden; }
    .header { padding:18px 24px; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
    .content { padding:24px; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; color:#111827; font-size:14px; line-height:1.7; }
    .footer { padding:16px 24px; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; color:#6b7280; font-size:12px; line-height:1.6; border-top:1px solid #f1f1f1; }
    h1 { margin:0 0 8px; font-size:18px; }
    p { margin:0 0 14px; }
    .muted { color:#6b7280; font-size:13px; }
    .card { background:#f9fafb; border:1px solid #e5e7eb; border-radius:10px; padding:14px; margin:14px 0; }
    .row { margin:0 0 10px; }
    .label { color:#6b7280; font-size:12px; margin-bottom:2px; }
    .value { color:#111827; font-weight:600; word-break:break-word; }
    .button { display:inline-block; background:#2563eb; color:#ffffff; text-decoration:none; padding:12px 24px; border-radius:8px; font-weight:600; margin:16px 0; }
    .button:hover { background:#1d4ed8; }
    .warn { background:#fff7ed; border:1px solid #fed7aa; color:#9a3412; border-radius:10px; padding:12px; }
    .info { background:#eff6ff; border:1px solid #bfdbfe; color:#1e40af; border-radius:10px; padding:12px; }
    @media (max-width: 640px) {
      .wrapper { padding:14px 10px; }
      .content, .header, .footer { padding:16px 18px; }
    }
  </style>
</head>

<body>
  <div class="wrapper">
    <div class="container">

      <div class="header">
        <table role="presentation" width="100%">
          <tr>
            <td style="font-weight:700; color:#111827;">
              {{ app_name }}
            </td>
            <td align="right" style="color:#6b7280; font-size:12px;">
              Password reset
            </td>
          </tr>
        </table>
      </div>

      <div class="content">
        <h1>Reset your password</h1>

        <p>Hi{{ ", " + fullname if fullname else "" }},</p>

        <p class="muted">
          We received a request to reset the password for <strong>{{ email }}</strong>.
        </p>

        <p>
          Click the button below to choose a new password:
        </p>

        <div style="text-align:center;">
          <a href="{{ reset_url }}" class="button">Reset Password</a>
        </div>

        <p class="muted" style="font-size:12px; text-align:center;">
          Or copy and paste this link into your browser:<br />
          <a href="{{ reset_url }}" style="color:#2563eb; word-break:break-all;">{{ reset_url }}</a>
        </p>

        {% if ip_address or user_agent %}
        <div class="card">
          <div class="label" style="margin-bottom:8px;">Request details</div>
          
          {% if ip_address %}
          <div class="row">
            <div class="label">IP address</div>
            <div class="value">{{ ip_address }}</div>
          </div>
          {% endif %}

          {% if user_agent %}
          <div class="row" style="margin-bottom:0;">
            <div class="label">Device / Browser</div>
            <div class="value">{{ user_agent }}</div>
          </div>
          {% endif %}
        </div>
        {% endif %}

        <div class="info">
          <strong>⏱️ This link expires in {% if expiry_hours %}{{ expiry_hours }} hour{{ "s" if expiry_hours > 1 else "" }}{% else %}{{ expiry_minutes }} minutes{% endif %}.</strong>
        </div>

        <div class="warn">
          If you didn't request a password reset, you can safely ignore this email. Your password won't be changed.
        </div>

        <p style="margin-top:16px;">
          — {{ app_name }}
        </p>
      </div>

      <div class="footer">
        <p style="margin:0 0 8px;">
          Need help?
          {% if support_email %}
            Contact <a href="mailto:{{ support_email }}" style="color:#2563eb; text-decoration:underline;">{{ support_email }}</a>.
          {% else %}
            Contact your support team.
          {% endif %}
        </p>
        <p style="margin:0; color:#9ca3af; font-size:11px;">
          This is an automated email. Please do not reply.
        </p>
      </div>

    </div>
  </div>
</body>
</html>